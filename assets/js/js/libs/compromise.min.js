// compromise v14.13.0 - MIT license - https://github.com/spencermountain/compromise
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.compromise=t()}(this,function(){"use strict";const e=e=>!0===/./.test(e),t=e=>null==e?[]:!0===Array.isArray(e)?e:[e],r={excl:!0,incl:!0},i=function(e,t,i){const o=t.split(" "),n=o.length;let s={start:null,end:null};e:for(let a=i;a<e.length;a++){if(o[0]===e[a].normal){for(let i=1;i<n;i++){if(!e[a+i]||o[i]!==e[a+i].normal)continue e}s.start=a,s.end=a+n;break}}if(null===s.start)return s;let l=e[s.start-1];if(l&&!0===r[l.normal]&&e[s.start]){let e=!1,t=null;for(let r=s.start-2;r>=0;r--)if(e=e||!0===/^(the|a|an)$/.test(e[r].normal),e){t=r;break}null!==t&&(s.start=t)}return s};const o={TitleCase:e=>"titlecase"===e.case,CamelCase:e=>"camelcase"===e.case,UpperCase:e=>e.normal.toUpperCase()===e.normal&&e.normal.length>1,Acronym:e=>e.normal.toUpperCase()===e.normal&&e.normal.length>1,StartCase:e=>e.normal.charAt(0).toUpperCase()===e.normal.charAt(0),Person:e=>e.tags.has("Person"),Place:e=>e.tags.has("Place"),Organization:e=>e.tags.has("Organization"),Value:e=>e.tags.has("Value"),QuestionWord:e=>e.tags.has("QuestionWord"),FemalePerson:e=>e.tags.has("FemalePerson"),MalePerson:e=>e.tags.has("MalePerson"),LastName:e=>e.tags.has("LastName"),FirstName:e=>e.tags.has("FirstName"),Holiday:e=>e.tags.has("Holiday"),Month:e=>e.tags.has("Month"),WeekDay:e=>e.tags.has("WeekDay"),Uncountable:e=>e.tags.has("Uncountable"),Pronoun:e=>e.tags.has("Pronoun"),Conjunction:e=>e.tags.has("Conjunction"),Preposition:e=>e.tags.has("Preposition"),Determiner:e=>e.tags.has("Determiner"),Adverb:e=>e.tags.has("Adverb"),Adjective:e=>e.tags.has("Adjective"),Verb:e=>e.tags.has("Verb"),Term:()=>!0,Noun:e=>e.tags.has("Noun"),Expression:e=>e.tags.has("Expression"),Url:e=>e.tags.has("Url"),PhoneNumber:e=>e.tags.has("PhoneNumber"),Email:e=>e.tags.has("Email"),Emoji:e=>e.tags.has("Emoji"),Emoticon:e=>e.tags.has("Emoticon"),AtMention:e=>e.tags.has("AtMention"),Hashtag:e=>e.tags.has("Hashtag"),AdverbPhrase:()=>!0,VerbPhrase:()=>!0,NounPhrase:()=>!0,SVA:()=>!0,Quotation:()=>!0,Clause:()=>!0};Object.keys(o).forEach(e=>{const t=o[e];o[e.toLowerCase()]=t,o["#"+e]=t});const n=function(e,t,r,o,n){let s=i(e,o,n);if(null===s.start)return null;const a={start:s.start,length:s.end-s.start};return r&&s.start>0&&e[s.start-1].normal===r&&(a.start-=1,a.length+=1),t&&s.end<e.length&&e[s.end].normal===t&&(a.length+=1),a},s=function(t,r){let i={};for(let o=0;o<t.length;o++){let t=null;for(let n=0;n<r.length;n++){let s=r[n];if("string"==typeof s.match&&(t=s.match),s.word&&s.word!==t[o].normal&&(t=null),"function"==typeof s.match)try{t=s.match(t,o,i)}catch(e){console.error(e),t=null}if(!t)continue;let a=s.tag,l=s.force;if(a){let r={};r[a]=!0,l?e(t[o].tags,r):Object.assign(t[o].tags,r)}s.unTag&&t[o].tags.delete(s.unTag),s.group&&(i[s.group]=o)}o<t.length-1&&Object.keys(i).length>0&&(i={})}};const a=e=>Object.keys(e).reduce((t,r)=>(t[r]=t[r]||0,t[r]+=e[r],t),{}),l={};l.Adjective={Determiner:"Adjective",Superlative:"Adjective",Comparative:"Adjective",Participle:"Adjective",Value:"Adjective",Number:"Adjective",Ordinal:"Adjective",Cardinal:"Adjective"},l.Adverb={Adverb:"Adverb"},l.Condition={Condition:"Condition"},l.Conjunction={Conjunction:"Conjunction"},l.Determiner={Determiner:"Determiner"},l.Expression={Expression:"Expression"},l.Noun={Noun:"Noun",Person:"Noun",Place:"Noun",Organization:"Noun",Value:"Noun",Date:"Noun",ProperNoun:"Noun",Pronoun:"Noun",Possessive:"Noun",Singular:"Noun",Plural:"Noun",Actor:"Noun",Activity:"Noun",Unit:"Noun",Demonym:"Noun",Honorific:"Noun",Uncountable:"Noun"},l.Preposition={Preposition:"Preposition",QuestionWord:"Preposition"},l.Pronoun={Pronoun:"Pronoun",Person:"Pronoun"},l.QuestionWord={QuestionWord:"QuestionWord"},l.Verb={Verb:"Verb",Infinitive:"Verb",PresentTense:"Verb",PastTense:"Verb",Gerund:"Verb",PerfectTense:"Verb",FuturePerfect:"Verb",Pronombre:"Verb",Modal:"Verb",Pluperfect:"Verb",Copula:"Verb",Participle:"Verb",Auxiliary:"Verb",PhrasalVerb:"Verb",Participle:"Verb",ActiveVoice:"Verb",PassiveVoice:"Verb"},l.Value={Value:"Value"},l.Person={Person:"Person",FirstName:"Person",LastName:"Person",MalePerson:"Person",FemalePerson:"Person"},l.Place={Place:"Place",Country:"Place",City:"Place",Address:"Place",Region:"Place"},l.Organization={Organization:"Organization",SportsTeam:"Organization",Company:"Organization",School:"Organization"},l.Date={Date:"Date",Month:"Date",WeekDay:"Date",Time:"Date",Holiday:"Date"};const c=(e,t)=>Object.entries(t).reduce((t,[r,i])=>((e.tags.has(r)||"ProperNoun"===r&&e.tags.has("Noun")&&e.normal.match(/^[A-Z]/))&&Object.keys(i).forEach(e=>{t[e]=i[e]}),t),{});class u{constructor(e,t,r,i){this.document=t,this.start=r||0,this.length=null==i?t[0].terms.length:i,this._terms=null,this._cache={},this.frozen=!1,Object.defineProperty(this,"parent",{value:e,writable:!0}),Object.defineProperty(this,"world",{value:e.world,writable:!0}),Object.defineProperty(this,"model",{value:e.model,writable:!0}),Object.defineProperty(this,"methods",{value:e.methods,writable:!0})}get terms(){if(null===this._terms){let e=this.document[0].terms,t=this.start,r=this.length;this._terms=e.slice(t,t+r)}return this._terms}get termList(){return this.terms}get docs(){return[this.terms]}get pointer(){return this.fullPointer[0]}get fullPointer(){if(this.parent&&this.parent.fullPointer){let e=this.parent.fullPointer;const[t,r,i]=e[e.length-1],o=r+this.start;return e.concat([[t,o,i+this.length]])}let e=null;return this.start>0&&null===this.start?e=[[0,0,this.start]]:e=[[0,this.start,this.length+this.start]],e}get length(){return this.docs[0].length}get wordCount(){return this.terms.filter(e=>""!==e.text).length}get isDoc(){return!0}get text(){return this.methods.compute.text(this)}get json(){return this.methods.compute.json(this)}get normal(){return this.methods.compute.normal(this)}get phrases(){return this.toPhrases()}get parent(){return this.parent||this}get parents(){const e=[];let t=this;for(;t=t.parent;)e.push(t);return new h(e,this.world)}get world(){return this.parent.world}get isFrozen(){return this.frozen||this.parent.isFrozen}get isView(){return!0}get toJSON(){return()=>this.json()}get isSingular(){let e=this.match("#Singular+");return e.found&&e.length===this.length?e:this.match("#Plural+").found?new h([],this.world):e}get isPlural(){let e=this.match("#Plural+");return e.found&&e.length===this.length?e:this.match("#Singular+").found?new h([],this.world):e}first(){const e=this.docs.map(e=>e.slice(0,1));return new h(e,this.world,this)}firstTerm(){return this.first().terms[0]}last(){const e=this.docs.map(e=>e.slice(e.length-1));return new h(e,this.world,this)}lastTerm(){return this.last().terms[0]}slice(e,t){const r=this.docs.map(r=>r.slice(e,t));return new h(r,this.world,this)}eq(e){const t=this.docs.map(t=>t[e]).filter(e=>e);return new h([t],this.world,this)}term(e){return this.terms[e]}terms(e){return this.eq(e)}match(e,t,r){let i=this.methods.one.match(e,t,r);return i.docs=this.methods.one.getDoc(i.found,this.docs),i.freeze()}matchOne(e,t){return this.match(e,t).eq(0)}if(e){return this.match(e,null,null)}ifNo(e){return this.match(e,null,null).found?new h([],this.world):this}has(e){return this.match(e,null,null).found}lookBehind(e){return this.before(e)}lookAhead(e){return this.after(e)}before(e){const{docs:t,from:r}=this.methods.one.before(this.docs,e);return new h(t,r,this)}after(e){const{docs:t,from:r}=this.methods.one.after(this.docs,e);return new h(t,r,this)}grow(e){const{docs:t,from:r}=this.methods.one.grow(this.docs,e);return new h(t,r,this)}growRight(e){return this.grow(e)}growLeft(e){const{docs:t,from:r}=this.methods.one.growLeft(this.docs,e);return new h(t,r,this)}debug(){return this.methods.one.debug(this),this}find(e,t){return"number"==typeof e?this.eq(e):e?this.match(e,t):this}clauses(e){const t=this.methods.one.clauses(this);return e?t.match(e):t}hyphenate(){return this.methods.one.hyphenate(this)}dehyphenate(){return this.methods.one.dehyphenate(this)}toCamelCase(){return this.methods.one.toCamelCase(this)}toTitleCase(){return this.methods.one.toTitleCase(this)}toSentenceCase(){return this.methods.one.toSentenceCase(this)}toUpperCase(){return this.methods.one.toUpperCase(this)}toLowerCase(){return this.methods.one.toLowerCase(this)}toQuotations(e){return this.methods.one.toQuotations(this,e)}toParentheses(e){return this.methods.one.toParentheses(this,e)}isEqual(e){const t="string"==typeof e?this.world.one(e):e,r=this.docs.length,i=t.docs.length;if(r!==i)return!1;for(let e=0;e<r;e++){const r=this.docs[e]||[],i=t.docs[e]||[],o=r.length,n=i.length;if(o!==n)return!1;for(let e=0;e<o;e++){if(r[e].id!==i[e].id)return!1}}return!0}terms(){return this.docs.reduce((e,t)=>e.concat(t),[])}get isA(){return"Doc"}get pointers(){let e=[];return this.docs.forEach(t=>{let r=t[0],i=t[t.length-1];r&&i&&e.push([r.id,i.id])}),e}get found(){return this.docs.length>0&&this.docs[0].length>0}get from(){return this}}const h=u;var d=u;const p=e=>`Compromise v${e.version}
-
`,m=function(e,t){let r=e.filter(e=>e.found);return t.pointer&&r.forEach((e,r)=>{let i=t.pointer[r];e.start=i[1],e.length=i[2]-i[1]}),r};class g extends d{constructor(e,t,r,i){super(r,i),this.docs=e,this.pointer=t,this.isA="List"}get length(){return this.docs.length}get found(){return this.docs.length>0}get wordCount(){return this.docs.reduce((e,t)=>e+t.wordCount,0)}get termList(){return this.docs.map(e=>e.terms)}slice(e,t){const r=this.docs.slice(e,t),i=this.pointer?this.pointer.slice(e,t):null;return new g(r,i,this.world,this)}eq(e){let t=this.docs[e]?this.docs[e].docs[0]:[];return new h([t],this.world,this)}term(e){const t=this.docs.map(t=>t.terms[e]);return new g(t,null,this.world,this)}terms(e){const t=this.docs.map(t=>t.terms[e]).filter(e=>e);return new g(t,null,this.world,this)}first(){const e=this.docs.map(e=>e.first());return new g(e,null,this.world,this)}firstTerm(){const e=this.docs.map(e=>e.firstTerm());return new g(e,null,this.world,this)}last(){const e=this.docs.map(e=>e.last());return new g(e,null,this.world,this)}lastTerm(){const e=this.docs.map(e=>e.lastTerm());return new g(e,null,this.world,this)}match(e,t,r){const i=m(this.docs.map(i=>i.match(e,t,r)),this);return new g(i,null,this.world,this)}matchOne(e,t){return this.match(e,t).eq(0)}if(e){const t=m(this.docs.map(t=>t.if(e)),this);return new g(t,null,this.world,this)}ifNo(e){const t=m(this.docs.map(t=>t.ifNo(e)),this);return new g(t,null,this.world,this)}has(e){return this.docs.some(t=>t.has(e))}before(e){const t=this.docs.map(t=>t.before(e).docs[0]||[]).filter(e=>e.length>0);return new h(t,this.world,this)}after(e){const t=this.docs.map(t=>t.after(e).docs[0]||[]).filter(e=>e.length>0);return new h(t,this.world,this)}get parent(){let e=[];return this.docs.forEach(t=>{e.push(t.parent)}),new g(e,null,this.world,this)}get parents(){return this.parent}get toJSON(){return()=>this.docs.map(e=>e.json())}get text(){return this.docs.map(e=>e.text())}get normal(){return this.docs.map(e=>e.normal())}get isPlural(){const e=this.docs.filter(e=>e.isPlural().found),t=e.map(e=>e.pointer);return new g(e,t,this.world,this)}get isSingular(){const e=this.docs.filter(e=>e.isSingular().found),t=e.map(e=>e.pointer);return new g(e,t,this.world,this)}clone(e){const t=this.docs.map(t=>t.clone(e));return new g(t,this.pointer,this.world,this)}map(e){const t=this.docs.map(e);return new g(t,this.pointer,this.world,this)}forEach(e){this.docs.forEach(e)}filter(e){const t=this.docs.filter(e),r=t.map(e=>e.pointer);return new g(t,r,this.world,this)}find(e){const t=this.docs.find(e);return t?new g([t],t.pointer,this.world,this):new g([],null,this.world,this)}some(e){return this.docs.some(e)}random(e=1){const t=[];let r=this.docs.slice(0);for(let i=0;i<e&&r.length>0;i++){let e=Math.floor(Math.random()*r.length);t.push(r[i]),r.splice(e,1)}const i=t.map(e=>e.pointer);return new g(t,i,this.world,this)}sort(e){const t=this.docs.slice(0);return t.sort(e),new g(t,null,this.world,this)}adverbs(){const e=this.docs.map(e=>e.adverbs());return new g(e,null,this.world,this)}conjunctions(){const e=this.docs.map(e=>e.conjunctions());return new g(e,null,this.world,this)}nouns(){const e=this.docs.map(e=>e.nouns());return new g(e,null,this.world,this)}prepositions(){const e=this.docs.map(e=>e.prepositions());return new g(e,null,this.world,this)}pronouns(){const e=this.docs.map(e=>e.pronouns());return new g(e,null,this.world,this)}verbs(){const e=this.docs.map(e=>e.verbs());return new g(e,null,this.world,this)}}var f,b={alias:{people:"Person",things:"Noun",places:"Place",organizations:"Organization",pronouns:"Pronoun",verbs:"Verb",adjectives:"Adjective",adverbs:"Adverb",conjunctions:"Conjunction",prepositions:"Preposition"},isA:{Adverb:"Adverb",Condition:"Condition",Conjunction:"Conjunction",Determiner:"Determiner",Expression:"Expression",Noun:"Noun",Preposition:"Preposition",Pronoun:"Pronoun",QuestionWord:"QuestionWord",Verb:"Verb",Value:"Value",Adjective:"Adjective",Date:"Date",Person:"Person",Place:"Place",Organization:"Organization"}};const w=function(e,t,r){let o={found:!1,pointer:null,docs:null};const n=function(e,t){const r=[];let i=0;return t.forEach(t=>{const o=e[i],n=o.slice(t.start,t.end);r.push(n),i+=1}),r},s=function(e,t){const r=e.length,i=t.length,o=[];if(0===r||0===i)return o;let n=e[0].length;for(let s=0;s<n;s++){let n=!0;for(let o=0;o<r;o++)if(!e[o][s]||!t[o](e[o][s]))return n=!1,o=r;n&&o.push(s)}return o}(e,r);if(0===s.length)return o;let a=function(e,t,r){let i=[];let o=0;let n=0;for(let t=0;t<e.length;t++){let s=e[t];if(s>o){let e=r.slice(n,t);e.length>0&&i.push(e),n=t}o=s+1}let s=r.slice(n,e.length);return s.length>0&&i.push(s),i}(s,0,s);o.found=!0;const l=a.map(t=>{const r=t[0];return{start:r,end:r+e.length}});return o.docs=n(e,l),o.pointer=l,o};class v{constructor(e,t,i,o){this._cache={},this.isA="Doc",this.document=[],this.methods={one:{},two:{},three:{}},this.model={one:{},two:{},three:{}},this.compute={};let n=Object.assign({},b,o);this.world=this,this.methods.one=Object.assign({},n.methods.one),this.methods.two=Object.assign({},n.methods.two),this.methods.three=Object.assign({},n.methods.three),this.model={one:Object.assign({},n.model.one),two:Object.assign({},n.model.two),three:Object.assign({},n.model.three)},this.compute=Object.assign({},n.compute),this.hooks=n.hooks||[],this.looks=n.looks||[],this.isFrozen=!1,i=i||{version:"1.0.0"},this.version=i.version,this.verbose=!1,this.dirty=!1;const s=this.methods.one.preTagger;this.document=s(e,this),s=this.methods.one.postTagger,this.document=s(this.document,this);let a=new h(this.document,this);return a.cache(),a}stats(){return{terms:this.wordCount,sentences:this.length}}}return f=v,Object.defineProperty(f.prototype,"isDoc",{get:()=>!0,configurable:!0}),f});